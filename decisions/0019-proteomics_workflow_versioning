---
status: proposed 
date: 2024-11-14 
deciders: Alicia, Paul, Lee Ann, Katherine, Sam, Cam, Yuri
consulted: Mark M., Sierra
informed: Chris M.
---
# Subclass metaproteomics workflows

## Context and Problem Statement

Version 2 of the proteomics workflow is now avaliable. Version 2 uses Kaiko to generate a metagenome reference using machine learning if one does not exist. 
Version 1 of the workflow, which depends on an existing metagenome reference, will contintue to be run. How should these workflows be versioned? 
Existing workflow versioning convention is that if a workflow is return the typecode, shoulder and blade are the same and there is a version increment 
(ex nmdc:wfmp-11-abcd.1 for the first run and nmdc:wfmp-11-abdc.2 for the second run). 


## Considered Options

* Subclass v1 and v2 of proteomics workflow
This option would provide different human readable typecodes to orient a user and it would be clearer that the most recent version of a true referenced based workflow run versus a in-silico 
based reference.  An example would be the first run is a reference-based (V1) with an identifier of nmdc:wfmprb-11-1231.1, the second is a version 2 (Kaiko) workflow run with an 
identifier of nmdc:wfmpis-11-1247.1, the third run there is an updated annotation and V1 is rerun. This would would get an identifer of nmdc:wfmprb-11-1231.2. 
an updated annotation and V1 is rerun. This would would get an identifer of nmdc:wfmp-11-1231.3 with the current modeling.
* Leave metaproteomics as a single workflow execution subclass
This option does not provide any orientation to the user via a typecode and would be more complex to correctly version the workflows. This would either involve complex logic to look at the 
version to decide if to increment the version and for what blade. Or it would result in the two versions using the same identifier type code, blade and shoulder which would be confusing to the user.
An example would be the first run is a reference-based (V1) with an identifier of nmdc:wfmp-11-1231.1, the second is a version 2 (Kaiko) workflow run with an identifier of nmdc:wfmp-11-1231.2, the third there is 
an updated annotation and V1 is rerun. This would would get an identifer of nmdc:wfmp-11-1231.3 with the current modeling.


## Decision Outcome

Chosen option: Subclass v1 and v2 of proteomics workflow, because it provides a simplier implmenation for workflow scripts and is more intiuitive for users. Work will be done in microbiomedata/nmdc-schema#2256.

